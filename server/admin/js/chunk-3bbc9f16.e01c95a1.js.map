{"version":3,"sources":["webpack:///./src/views/Product.vue?fd6e","webpack:///./src/views/Product.vue?25f5","webpack:///src/views/Product.vue","webpack:///./src/views/Product.vue?6575","webpack:///./src/views/Product.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","_v","_s","id","attrs","on","$event","preventDefault","saveProduct","apply","arguments","model","value","product","callback","$$v","$set","expression","_l","item","key","staticClass","uploadUrl","getAuthHeaders","res","url","image","ref","$imgAdd","staticRenderFns","name","components","mavonEditor","props","price","description","category","fixedCategories","methods","$http","put","post","$message","type","message","error","console","get","data","pos","$file","formData","FormData","append","then","$refs","mavon","$img2Url","fetchProduct","$route","params","log","component"],"mappings":"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","file":"js/chunk-3bbc9f16.e01c95a1.js","sourcesContent":["export * from \"-!../../node_modules/.pnpm/mini-css-extract-plugin@0.9.0_webpack@4.47.0/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/.pnpm/css-loader@3.6.0_webpack@4.47.0/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/.pnpm/vue-loader@15.11.1_99100e4f92fd92a2f7c7c086c9a74806/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/.pnpm/postcss-loader@3.0.0/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.47.0/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/.pnpm/vue-loader@15.11.1_99100e4f92fd92a2f7c7c086c9a74806/node_modules/vue-loader/lib/index.js??vue-loader-options!./Product.vue?vue&type=style&index=0&id=2f05326e&prod&scoped=true&lang=css\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h1',[_vm._v(_vm._s(_vm.id ? '编辑商品' : '新增商品'))]),_c('el-form',{attrs:{\"label-width\":\"120px\"},on:{\"submit\":function($event){$event.preventDefault();return _vm.saveProduct.apply(null, arguments)}}},[_c('el-form-item',{attrs:{\"label\":\"商品分类\"}},[_c('el-select',{model:{value:(_vm.product.category),callback:function ($$v) {_vm.$set(_vm.product, \"category\", $$v)},expression:\"product.category\"}},_vm._l((_vm.fixedCategories),function(item){return _c('el-option',{key:item,attrs:{\"label\":item,\"value\":item}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"商品名称\"}},[_c('el-input',{model:{value:(_vm.product.name),callback:function ($$v) {_vm.$set(_vm.product, \"name\", $$v)},expression:\"product.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"商品价格\"}},[_c('el-input',{attrs:{\"type\":\"number\"},model:{value:(_vm.product.price),callback:function ($$v) {_vm.$set(_vm.product, \"price\", $$v)},expression:\"product.price\"}})],1),_c('el-form-item',{attrs:{\"label\":\"商品图片\"}},[_c('el-upload',{staticClass:\"avatar-uploader\",attrs:{\"action\":_vm.uploadUrl,\"headers\":_vm.getAuthHeaders(),\"show-file-list\":false,\"on-success\":function (res) { return _vm.$set(_vm.product, 'image', res.url); }}},[(_vm.product.image)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.product.image}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"})])],1),_c('el-form-item',{attrs:{\"label\":\"商品描述\"}},[_c('mavon-editor',{ref:\"mavon\",attrs:{\"code_style\":\"monokai-sublime\",\"ishljs\":true},on:{\"imgAdd\":_vm.$imgAdd},model:{value:(_vm.product.description),callback:function ($$v) {_vm.$set(_vm.product, \"description\", $$v)},expression:\"product.description\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"native-type\":\"submit\"},on:{\"click\":_vm.saveProduct}},[_vm._v(\"保存\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <h1>{{ id ? '编辑商品' : '新增商品' }}</h1>\r\n    <el-form label-width=\"120px\" @submit.prevent=\"saveProduct\">\r\n      <el-form-item label=\"商品分类\">\r\n        <el-select v-model=\"product.category\">\r\n          <el-option\r\n            v-for=\"item in fixedCategories\"\r\n            :key=\"item\"\r\n            :label=\"item\"\r\n            :value=\"item\"\r\n          ></el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item label=\"商品名称\">\r\n        <el-input v-model=\"product.name\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"商品价格\">\r\n        <el-input v-model=\"product.price\" type=\"number\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"商品图片\">\r\n        <el-upload\r\n          class=\"avatar-uploader\"\r\n          :action=\"uploadUrl\"\r\n          :headers=\"getAuthHeaders()\"\r\n          :show-file-list=\"false\"\r\n          :on-success=\"(res) => $set(product, 'image', res.url)\"\r\n        >\r\n          <img v-if=\"product.image\" :src=\"product.image\" class=\"avatar\" />\r\n          <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n        </el-upload>\r\n      </el-form-item>\r\n      <el-form-item label=\"商品描述\">\r\n        <mavon-editor\r\n          code_style=\"monokai-sublime\"\r\n          :ishljs=\"true\"\r\n          ref=\"mavon\"\r\n          v-model=\"product.description\"\r\n          @imgAdd=\"$imgAdd\"\r\n        ></mavon-editor>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" native-type=\"submit\" @click=\"saveProduct\">保存</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mavonEditor } from 'mavon-editor'\r\nimport 'mavon-editor/dist/css/index.css'\r\n\r\nexport default {\r\n  name: 'ProductForm',\r\n  components: {\r\n    mavonEditor,\r\n  },\r\n  props: {\r\n    id: {},\r\n  },\r\n  data() {\r\n    return {\r\n      product: {\r\n        name: '',\r\n        price: 0,\r\n        image: '',\r\n        description: '',\r\n        category: '', // 初始化为字符串\r\n      },\r\n      fixedCategories: ['CPU', 'GPU', '苹果', '协处理器', '其他'], // 固定的分类\r\n    }\r\n  },\r\n  methods: {\r\n    async saveProduct() {\r\n      try {\r\n        if (this.id) {\r\n          await this.$http.put(`/products/${this.id}`, this.product);\r\n        } else {\r\n          await this.$http.post('/products', this.product);\r\n        }\r\n\r\n        // 提示保存成功\r\n        this.$message({\r\n          type: 'success',\r\n          message: '保存成功',\r\n        });\r\n\r\n        // 可以在成功后跳转到产品列表\r\n        //this.$router.push('/products/list');\r\n\r\n      } catch (error) {\r\n        // 在请求失败时提示错误信息\r\n        this.$message({\r\n          type: 'error',\r\n          message: '保存失败，请重试！', // 可以根据具体错误更新信息\r\n        });\r\n\r\n        // 如果需要，可以在这里输出错误的详细信息，方便调试\r\n        console.error('保存产品时发生错误:', error);\r\n      }\r\n    },\r\n    async fetchProduct(id) {\r\n      if (id) {\r\n        const res = await this.$http.get(`/products/${id}`);\r\n        this.product = res.data;\r\n      }\r\n    },\r\n    $imgAdd(pos, $file) {\r\n      const formData = new FormData();\r\n      formData.append('file', $file);\r\n      this.$http.post('/upload', formData).then((res) => {\r\n        this.$refs.mavon.$img2Url(pos, res.data.url);\r\n      });\r\n    },\r\n  },\r\n  created() {\r\n    this.fetchProduct(this.$route.params.id);\r\n    console.log(this.$route.params.id);\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.avatar-uploader-icon {\r\n  font-size: 28px;\r\n  color: #8c939d;\r\n}\r\n.avatar {\r\n  width: 100px;\r\n  height: 100px;\r\n  display: block;\r\n  border-radius: 50%;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.47.0/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/.pnpm/vue-loader@15.11.1_99100e4f92fd92a2f7c7c086c9a74806/node_modules/vue-loader/lib/index.js??vue-loader-options!./Product.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.47.0/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/.pnpm/vue-loader@15.11.1_99100e4f92fd92a2f7c7c086c9a74806/node_modules/vue-loader/lib/index.js??vue-loader-options!./Product.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Product.vue?vue&type=template&id=2f05326e&scoped=true\"\nimport script from \"./Product.vue?vue&type=script&lang=js\"\nexport * from \"./Product.vue?vue&type=script&lang=js\"\nimport style0 from \"./Product.vue?vue&type=style&index=0&id=2f05326e&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/.pnpm/vue-loader@15.11.1_99100e4f92fd92a2f7c7c086c9a74806/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2f05326e\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}