(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-72142f40"],{6211:function(t,e,r){},"825f":function(t,e,r){"use strict";r("6211")},"96fc":function(t,e,r){"use strict";r.r(e);var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("h1",[t._v("商品列表")]),r("el-form",[r("el-form-item",{attrs:{label:"商品分类"}},[r("el-select",{model:{value:t.category,callback:function(e){t.category=e},expression:"category"}},t._l(t.fixedCategories,(function(t){return r("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1),r("el-button",{staticStyle:{"margin-left":"200px"},attrs:{type:"primary"},on:{click:function(e){return t.fetchProducts(t.category)}}},[t._v(" 搜索 ")]),r("el-table",{staticStyle:{width:"100%"},attrs:{data:t.products}},[r("el-table-column",{attrs:{prop:"name",label:"商品名称",width:"180"}}),r("el-table-column",{attrs:{prop:"price",label:"商品价格",width:"180"}}),r("el-table-column",{attrs:{prop:"category",label:"商品分类",width:"180"}}),r("el-table-column",{attrs:{prop:"image",label:"商品图片",width:"180"},scopedSlots:t._u([{key:"default",fn:function(t){return[r("img",{staticStyle:{width:"50px",height:"50px"},attrs:{src:t.row.image,alt:"商品图片"}})]}}])}),r("el-table-column",{attrs:{label:"操作",width:"270"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{attrs:{type:"primary"},on:{click:function(r){return t.editProduct(e.row._id)}}},[t._v(" 编辑 ")]),r("el-button",{attrs:{type:"danger"},on:{click:function(r){return t.deleteProduct(e.row._id)}}},[t._v(" 删除 ")]),r("el-button",{attrs:{type:"primary"},on:{click:function(r){return t.addslideshow(e.row._id)}}},[t._v(" 添加 ")])]}}])})],1),r("el-pagination",{staticStyle:{"margin-top":"20px"},attrs:{"current-page":t.currentPage,"page-size":t.pageSize,total:t.totalProducts,layout:"total, prev, pager, next, jumper"},on:{"current-change":t.fetchProducts}})],1)],1)},a=[],c={data(){return{products:[],searchCategory:"",currentPage:1,pageSize:10,totalProducts:0,category:"",fixedCategories:["CPU","GPU","苹果","协处理器","其他"],page:1}},methods:{async fetchProducts(t=null){try{console.log("测试前");const e=await this.$http.get("/products",{params:{category:t}});console.log("测试后"),console.log(e),this.products=e.data.products}catch(e){console.error("获取产品失败",e)}},editProduct(t){this.$router.push("/products/create/"+t)},async deleteProduct(t){try{await this.$http.delete("/products/"+t),this.$message.success("删除成功"),this.fetchProducts()}catch(e){this.$message.error("删除失败，请重试！"),console.error("删除商品时发生错误:",e)}},async addslideshow(t){console.log(t);try{await this.$http.post("/slideshows",{productId:t}),this.$message.success("添加轮播图成功！")}catch(e){this.$message.error("添加轮播图失败，请重试！"),console.error("添加轮播图失败，请重试！",e)}}},created(){this.fetchProducts()}},s=c,l=(r("825f"),r("d34b")),n=Object(l["a"])(s,o,a,!1,null,"10c7c20f",null);e["default"]=n.exports}}]);
//# sourceMappingURL=chunk-72142f40.ab1b86d4.js.map