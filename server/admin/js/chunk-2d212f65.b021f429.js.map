{"version":3,"sources":["webpack:///./src/views/UserList.vue?36d4","webpack:///src/views/UserList.vue","webpack:///./src/views/UserList.vue?f9c3","webpack:///./src/views/UserList.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","on","sendEmail","slot","_v","tableData","handleSelectionChange","scopedSlots","_u","key","fn","scope","row","avatarImg","$event","$router","push","deleteHandle","dialogVisible","ref","form","formRules","model","value","callback","$$v","$set","expression","sendhandle","staticRenderFns","title","multipleSelection","emailArr","sendContent","getList","methods","res","$http","get","data","$confirm","content","confirmButtonText","cancelButtonText","type","then","async","delete","_id","$message","message","catch","val","map","v","email","subject","nickName","length","warning","promiseArr","forEach","e","replyObj","recipient","html","post","Promise","all","component"],"mappings":"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","file":"js/chunk-2d212f65.b021f429.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('m-top-handle',{attrs:{\"title\":\"昵称\",\"content\":\"新建用户\"}},[_c('el-button',{staticClass:\"fr\",attrs:{\"slot\":\"email\",\"type\":\"primary\"},on:{\"click\":_vm.sendEmail},slot:\"email\"},[_vm._v(\" 推送邮件 \")])],1),_c('el-table',{attrs:{\"data\":_vm.tableData,\"border\":\"\"},on:{\"selection-change\":_vm.handleSelectionChange}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"label\":\"序号\",\"width\":\"50\"}}),_c('el-table-column',{attrs:{\"prop\":\"_id\",\"label\":\"id\"}}),_c('el-table-column',{attrs:{\"prop\":\"avatarImg\",\"label\":\"头像\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('img',{attrs:{\"src\":scope.row.avatarImg,\"alt\":\"\",\"height\":\"50\"}})]}}])}),_c('el-table-column',{attrs:{\"prop\":\"nickName\",\"label\":\"昵称\"}}),_c('el-table-column',{attrs:{\"prop\":\"email\",\"label\":\"邮箱\"}}),_c('el-table-column',{attrs:{\"prop\":\"url\",\"label\":\"博客/github网址\"}}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"90\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.$router.push((\"/users/editor/\" + (scope.row._id)))}}},[_vm._v(\" 编辑 \")]),_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.deleteHandle(scope.row)}}},[_vm._v(\" 删除 \")])]}}])}),_c('el-table-column',{attrs:{\"type\":\"selection\",\"width\":\"55\"}})],1),_c('el-dialog',{attrs:{\"title\":\"上传文件\",\"visible\":_vm.dialogVisible,\"width\":\"320px\",\"center\":\"\"},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form,\"rules\":_vm.formRules}},[_c('el-form-item',{attrs:{\"props\":\"sendContent\",\"label\":\"发送内容\"}},[_c('el-input',{model:{value:(_vm.form.sendContent),callback:function ($$v) {_vm.$set(_vm.form, \"sendContent\", $$v)},expression:\"form.sendContent\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.sendhandle}},[_vm._v(\"提交\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <m-top-handle title=\"昵称\" content=\"新建用户\">\r\n      <el-button class=\"fr\" slot=\"email\" type=\"primary\" @click=\"sendEmail\">\r\n        推送邮件\r\n      </el-button>\r\n    </m-top-handle>\r\n    <el-table\r\n      :data=\"tableData\"\r\n      border\r\n      @selection-change=\"handleSelectionChange\"\r\n    >\r\n      <el-table-column type=\"index\" label=\"序号\" width=\"50\"></el-table-column>\r\n      <el-table-column prop=\"_id\" label=\"id\"></el-table-column>\r\n      <el-table-column prop=\"avatarImg\" label=\"头像\">\r\n        <template slot-scope=\"scope\">\r\n          <img :src=\"scope.row.avatarImg\" alt height=\"50\" />\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"nickName\" label=\"昵称\"></el-table-column>\r\n      <el-table-column prop=\"email\" label=\"邮箱\"></el-table-column>\r\n      <el-table-column prop=\"url\" label=\"博客/github网址\"></el-table-column>\r\n      <el-table-column label=\"操作\" width=\"90\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button\r\n            type=\"text\"\r\n            size=\"small\"\r\n            @click=\"$router.push(`/users/editor/${scope.row._id}`)\"\r\n          >\r\n            编辑\r\n          </el-button>\r\n          <el-button type=\"text\" size=\"small\" @click=\"deleteHandle(scope.row)\">\r\n            删除\r\n          </el-button>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column type=\"selection\" width=\"55\"></el-table-column>\r\n    </el-table>\r\n    <el-dialog\r\n      title=\"上传文件\"\r\n      :visible.sync=\"dialogVisible\"\r\n      width=\"320px\"\r\n      center\r\n    >\r\n      <el-form :model=\"form\" :rules=\"formRules\" ref=\"form\">\r\n        <el-form-item props=\"sendContent\" label=\"发送内容\">\r\n          <el-input v-model=\"form.sendContent\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-button type=\"primary\" @click=\"sendhandle\">提交</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      tableData: [],\r\n      title: '',\r\n      multipleSelection: [],\r\n      emailArr: [],\r\n      form: {\r\n        sendContent: '',\r\n      },\r\n      formRules: {},\r\n      dialogVisible: false,\r\n    }\r\n  },\r\n  created() {\r\n    this.getList()\r\n  },\r\n  methods: {\r\n    async getList() {\r\n      let res = await this.$http.get('/users')\r\n      this.tableData = res.data\r\n    },\r\n    deleteHandle(data) {\r\n      this.$confirm(`是否确定要删除留言: ${data.content} ?`, '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning',\r\n      })\r\n        .then(async () => {\r\n          await this.$http.delete(`/users/${data._id}`)\r\n          await this.getList()\r\n          this.$message({\r\n            type: 'success',\r\n            message: '删除成功!',\r\n          })\r\n        })\r\n        .catch(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '已取消删除',\r\n          })\r\n        })\r\n    },\r\n    handleSelectionChange(val) {\r\n      this.multipleSelection = val.map((v) => {\r\n        return { email: v.email, subject: v.nickName }\r\n      })\r\n    },\r\n    async sendEmail() {\r\n      if (this.multipleSelection.length === 0) {\r\n        return this.$message.warning('请选一个')\r\n      }\r\n      this.dialogVisible = true\r\n    },\r\n    sendhandle() {\r\n      let promiseArr = []\r\n      this.multipleSelection.forEach((e) => {\r\n        let replyObj = {\r\n          recipient: e.email,\r\n          subject: e.subject,\r\n          html: this.form.sendContent,\r\n        }\r\n        promiseArr.push(this.$http.post('/email', replyObj))\r\n      })\r\n      Promise.all(promiseArr).then(() => {\r\n        this.dialogVisible = false\r\n      })\r\n      // .catch(err => {\r\n      //   this.dialogVisible = false;\r\n      // });\r\n    },\r\n  },\r\n}\r\n</script>\r\n","import mod from \"-!../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.47.0/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/.pnpm/vue-loader@15.11.1_99100e4f92fd92a2f7c7c086c9a74806/node_modules/vue-loader/lib/index.js??vue-loader-options!./UserList.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/.pnpm/cache-loader@4.1.0_webpack@4.47.0/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/.pnpm/vue-loader@15.11.1_99100e4f92fd92a2f7c7c086c9a74806/node_modules/vue-loader/lib/index.js??vue-loader-options!./UserList.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./UserList.vue?vue&type=template&id=9f722e2c\"\nimport script from \"./UserList.vue?vue&type=script&lang=js\"\nexport * from \"./UserList.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/.pnpm/vue-loader@15.11.1_99100e4f92fd92a2f7c7c086c9a74806/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}