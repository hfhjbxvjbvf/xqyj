(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3bbc9f16"],{"9bcb":function(t,e,r){"use strict";r("e453")},d2f1:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("h1",[t._v(t._s(t.id?"编辑商品":"新增商品"))]),r("el-form",{attrs:{"label-width":"120px"},on:{submit:function(e){return e.preventDefault(),t.saveProduct.apply(null,arguments)}}},[r("el-form-item",{attrs:{label:"商品分类"}},[r("el-select",{model:{value:t.product.category,callback:function(e){t.$set(t.product,"category",e)},expression:"product.category"}},t._l(t.fixedCategories,(function(t){return r("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1),r("el-form-item",{attrs:{label:"商品名称"}},[r("el-input",{model:{value:t.product.name,callback:function(e){t.$set(t.product,"name",e)},expression:"product.name"}})],1),r("el-form-item",{attrs:{label:"商品价格"}},[r("el-input",{attrs:{type:"number"},model:{value:t.product.price,callback:function(e){t.$set(t.product,"price",e)},expression:"product.price"}})],1),r("el-form-item",{attrs:{label:"商品图片"}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.uploadUrl,headers:t.getAuthHeaders(),"show-file-list":!1,"on-success":function(e){return t.$set(t.product,"image",e.url)}}},[t.product.image?r("img",{staticClass:"avatar",attrs:{src:t.product.image}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),r("el-form-item",{attrs:{label:"商品描述"}},[r("mavon-editor",{ref:"mavon",attrs:{code_style:"monokai-sublime",ishljs:!0},on:{imgAdd:t.$imgAdd},model:{value:t.product.description,callback:function(e){t.$set(t.product,"description",e)},expression:"product.description"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary","native-type":"submit"},on:{click:t.saveProduct}},[t._v("保存")])],1)],1)],1)},o=[],s=r("00ec"),i=(r("3497"),{name:"ProductForm",components:{mavonEditor:s["mavonEditor"]},props:{id:{}},data(){return{product:{name:"",price:0,image:"",description:"",category:""},fixedCategories:["CPU","GPU","苹果","协处理器","其他"]}},methods:{async saveProduct(){try{this.id?await this.$http.put("/products/"+this.id,this.product):await this.$http.post("/products",this.product),this.$message({type:"success",message:"保存成功"})}catch(t){this.$message({type:"error",message:"保存失败，请重试！"}),console.error("保存产品时发生错误:",t)}},async fetchProduct(t){if(t){const e=await this.$http.get("/products/"+t);this.product=e.data}},$imgAdd(t,e){const r=new FormData;r.append("file",e),this.$http.post("/upload",r).then(e=>{this.$refs.mavon.$img2Url(t,e.data.url)})}},created(){this.fetchProduct(this.$route.params.id),console.log(this.$route.params.id)}}),c=i,l=(r("9bcb"),r("d34b")),n=Object(l["a"])(c,a,o,!1,null,"2f05326e",null);e["default"]=n.exports},e453:function(t,e,r){}}]);
//# sourceMappingURL=chunk-3bbc9f16.e01c95a1.js.map